@model IEnumerable<SklepMvc.Models.Product>

@{
  ViewData["Title"] = "Produkty";
}

<h2>Produkty</h2>

<p>
  <a asp-action="Create" class="btn btn-primary">+ Dodaj produkt</a>
</p>

<table class="table table-sm table-striped">
  <thead>
    <tr>
      <th>Nazwa</th>
      <th>Cena</th>
      <th>Stan</th>
      <th style="width: 220px;"></th>
    </tr>
  </thead>
  <tbody>
    @foreach (var p in Model)
    {
      <tr>
        <td>@p.Name</td>
        <td>@p.Price.ToString("0.00")</td>
        <td>@p.Stock</td>
        <td>
          <a asp-action="Details" asp-route-id="@p.Id">Szczegóły</a>
          <a asp-action="Edit" asp-route-id="@p.Id">Edytuj</a>
          <a asp-action="Delete" asp-route-id="@p.Id">Usuń</a>

          <form asp-controller="Cart" asp-action="Add" method="post" class="d-inline">
            @Html.AntiForgeryToken()
            <input type="hidden" name="productId" value="@p.Id" />
            <input type="hidden" name="quantity" value="1" />
            <button class="btn btn-sm btn-success">Dodaj do koszyka</button>
          </form>

          <form asp-controller="Orders" asp-action="CreateQuick" method="post" class="d-inline ms-2">
            @Html.AntiForgeryToken()
            <input type="hidden" name="productId" value="@p.Id" />
            <input type="hidden" name="quantity" value="1" />
            <button class="btn btn-sm btn-outline-primary">Kup teraz</button>
          </form>
        </td>
      </tr>
    }
  </tbody>
</table>